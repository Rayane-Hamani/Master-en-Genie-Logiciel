# **ASA - système des fichiers sur disque**

Forkez ce dépot, et ajoutez votre intervenant dans le membres en tant
que "Developpeur".

Écrivez un compte rendu à fur et mésure que vous progressez dans le
code.

## **Binôme**

- Rayane Hamani - rayane.hamani.etu@univ-lille.fr
- Florian Dendoncker - florian.dendoncker.etu@univ-lille.fr

## **Compilation**

Allez dans `libhw/src` et faites :

```sh
make
make install
```

Maintenant, allez dans `tp-skels/tpfs` et faites :

```sh
make
./mkhd
```

## **[Première séance: bibliothèque pour lire/écrire des secteurs](https://www.cristal.univ-lille.fr/~marquet/ens/fs/fs001.html)**

Dépôt des exercices : `tp-skels/tpfs`

| Exercice | Intitulé                               | Fichiers                               |
|----------|----------------------------------------|----------------------------------------|
| 1        | Afficher un secteur                    | dmps.c                                 |
| 2        | Formater un disque                     | frmt.c                                 |
| 3        | Une bibliothèque pour l'accès physique | drive.c </br> dmps.c </br> frmt.c      |

Afin de valider la bibliothèque d'accès au matériel que nous avons écrits, [dmps.c](tp-skels/tpfs/dmps.c) et [frmt.c](tp-skels/tpfs/frmt.c) possèdent chacun une fonction `using_drive` reproduisant le comportement attendu mais en utilisant cette fois les fonctions de la bibliothèque.

Pour observer le bon fonctionnement de `frmt` :

```sh
./frmt

hexdump -C vdiskA.bin
```

Pour observer le bon fonctionnement de `dmps` :

```sh
./dmps numCyl numSec

hexdump -C vdiskA.bin -s START -n 256
```

Avec `START = (((numCyl * 16) + numSec) * 256) + 12`

## **[Deuxième séance: Partitionnement](https://www.cristal.univ-lille.fr/~marquet/ens/fs/fs002.html)**

Dépôt des exercices : `tp-skels/vm`

| Exercice | Intitulé                               | Fichiers                               |
|----------|----------------------------------------|----------------------------------------|
| 4        | Secteur d'amorce primaire              | mbr.h                                  |
| 5        | Initialisation des volumes             | mbr.c                                  |
| 6        | Conversion d'adressage                 | mbr.c                                  |
| 7        | Bibliothèque d'accès aux volumes       | mbr.c                                  |
| 8        | Gestionnaire de partitions             | vm.c                                   |

## **Troisième séance: Gestion des blocs et inoeuds**

Dépôt des exercices : `tp-skels/vm`

| Exercice | Intitulé                               | Fichiers                               |
|----------|----------------------------------------|----------------------------------------|
| 9        | Descripteurs de volume                 | superblock.h                           |
| 10       | Initialiser un volume                  | superblock.c                           |
| 11       | Sélection et mise à jour d'un volume   | superblock.c                           |
| 12       | Allouer et libérer des blocs           | superblock.c </br> mknfs.c </br> dfs.c |
