#ifndef __MBR_H__
#define __MBR_H__



#define MAX_VOL 8
#define MAGIC 0xBEE



struct volume
{
    unsigned int start; /* in sector */
    unsigned int size;  /* in sector */
};

struct mbr
{
    unsigned int nvol;
    unsigned int magic;
    struct volume volumes[MAX_VOL];
};

extern struct mbr mbr;



void init_mbr();
void read_mbr();
void write_mbr();

unsigned int get_cylinder(unsigned int nvol, unsigned int nbloc);
unsigned int get_sector(unsigned int nvol, unsigned int nbloc);

void read_bloc(unsigned int vol, unsigned int nbloc, unsigned char* buffer);
void write_bloc(unsigned int vol, unsigned int nbloc, unsigned char* buffer);
void format_vol(unsigned int vol);



#endif