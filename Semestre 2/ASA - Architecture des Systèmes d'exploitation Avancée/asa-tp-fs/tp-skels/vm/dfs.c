#include <stdio.h>
#include <stdlib.h>




#include "mbr.h"
#include "superblock.h"

#include "../../libhw/include/hardware.h"



int main()
{
    unsigned int i;

    printf("%.*s %.*s %.*s %.*s %.*s\n",
        32, "Filesystem",
        05, "Blocks"    ,
        05, "Free"      ,
        05, "Used"      ,
        05, "%Used"     );

    for(i=0; i<mbr.nvol; i++)
    {
        char*        filesystem = superblock.name;
        unsigned int blocks     = mbr.volumes[i].size;
        unsigned int free       = superblock.nb_free_blocks;
        unsigned int used       = blocks - free;
        float        used_perc  = (1 - (free / blocks)) * 100;

        printf("%.*s %.*d %.*d %.*d %.*f\n",
            32, filesystem,
            05, blocks    ,
            05, free      ,
            05, used      ,
            02, used_perc );
    }

    return EXIT_SUCCESS;
}